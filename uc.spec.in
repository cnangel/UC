%define _tmppath %{_topdir}/BUILDROOT

Name: @PACKAGE_NAME@
Version: @PACKAGE_VERSION@
Release: @PACKAGE_RELEASE@%{?dist}

Summary: template for uc project example 
License: GPLv3
Group: Development/Libraries
Url: @URL@
Source0: %{name}-%{version}.tar.gz
BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root-%(%{__id} -u -n)
#BuildRoot: %(mktemp -ud %{_tmppath}/%{name}-%{version}-%{release}-XXXXXX)

%define PACKAGE_HOME %{_datadir}/@PACKAGE@

Packager: Cnangel <cnangel@gmail.com>
#Requires: 
BuildRequires: cppunit-devel

%description
%{name} is a template for automake.

%package devel
Summary: Header files, libraries for %{name}.
Group: %{group}
Requires: %{name} = %{version}-%{release} 

%description devel
This package contains the header files and static libraries for %{name}.
If you like to develop programs using %{name}, you will need to install %{name}-devel.

%package data
Summary: Data for %{name}.
Group: %{group}
Requires: %{name} = %{version}-%{release} 

%description data
This package contains the training data, testing data and some useful data for %{name}, if need, you must install %{name}-data.

%package doc
Summary: Development documentation for %{name}.
Group: %{group}
Requires: %{name} = %{version}-%{release} 

%description doc
This package contains the development documentation and introduction or information for %{name}.
If you want to known develop programs and application about %{name}, you will need to install %{name}-doc.

%prep
%setup -q

%build
%configure
make %{?_smp_mflags}
make check

%install
rm -rf $RPM_BUILD_ROOT
#mkdir -p $RPM_BUILD_ROOT%{PACKAGE_HOME}/conf
#mkdir -p $RPM_BUILD_ROOT%{PACKAGE_HOME}/include
#mkdir -p $RPM_BUILD_ROOT%{PACKAGE_HOME}/lib
#cp -r conf/* $RPM_BUILD_ROOT%{PACKAGE_HOME}/conf
#cp -r include/* $RPM_BUILD_ROOT%{PACKAGE_HOME}/include
#cp -r lib/* $RPM_BUILD_ROOT%{PACKAGE_HOME}/lib
%makeinstall
#install -p -m 0644 include/* $RPM_BUILD_ROOT%{PACKAGE_HOME}/include
#install -p lib/* $RPM_BUILD_ROOT%{PACKAGE_HOME}/lib
#install -p -m 0644 data/* $RPM_BUILD_ROOT%{PACKAGE_HOME}/data
# install -p -m 0644 doc/* $RPM_BUILD_ROOT%{_docdir}
# cp -rf doc/* $RPM_BUILD_ROOT%{_docdir}
# delete tmp file 
#find $RPM_BUILD_ROOT%{PACKAGE_HOME} \( -name "Makefile*" \) -exec rm -rf '{}' \;
#find $RPM_BUILD_ROOT%{_docdir} \( -name "Makefile*" \) -exec rm -rf '{}' \;
#rm -rf `find $RPM_BUILD_ROOT%{PACKAGE_HOME} -name ".svn*"`
#rm -rf `find $RPM_BUILD_ROOT%{_docdir} -name ".svn*"`

%clean
rm -rf $RPM_BUILD_ROOT

%post
ldconfig

%postun
ldconfig

%files
%defattr(-,root,root,-)
#%doc AUTHORS COPYING ChangeLog INSTALL NEWS README
%{_libdir}/*.so*
%attr(755,root,root) %{_bindir}
%config(noreplace) %attr(666,root,root) %{_sysconfdir}/@PACKAGE_NAME@/*
#%{_infodir}
#%{_mandir}
#%config(noreplace) %attr(666,root,root) %{PACKAGE_HOME}/conf/*
%{PACKAGE_HOME}/include/*
%{PACKAGE_HOME}/lib/*
%attr(755,root,root) %{PACKAGE_HOME}/scripts/*
%attr(755,root,root) %{PACKAGE_HOME}/tools/*

%files devel
%defattr(-,root,root,-)
%{_includedir}
%{_libdir}/*.a
%{_libdir}/*.la
%{_libdir}/pkgconfig/*.pc

%files data
%defattr(-,root,root,-)
%{PACKAGE_HOME}/data

%files doc
%defattr(-,root,root,-)
%{_docdir}

%changelog
* Wed Aug 19 2009 Cnangel <cnangel@gmail.com> 0.0.3-5
- Add more headers design;
- Add test, you can use Check for c or Cppunit for c++(default: cppunit);
- Add tools and script directory, and delete not use files like Makefile.in etc.;
- Add Macro: DISTCLEANFILES
* Mon Aug 03 2009 Cnangel <cnangel@gmail.com> 0.0.2
- Improve version control and add data package;
- Add doc/doxygen to rpm;
- Add *.pc.in for pkgconfig;
- Replace some variables like @PACKAGE@ etc.;
* Mon Jun 08 2009 Cnangel <cnangel@gmail.com> 0.0.1
- Add LT_MAJOR, LT_REVISION and LT_AGE like lib*.so.1.0.0;
- Add DOXYGEN_OUTPUT_DIR doc/doxygen;
- You can visit http://my.huhoo.net/study for update.

# -fin-
